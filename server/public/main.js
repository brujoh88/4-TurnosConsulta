(()=>{var t,e=document.getElementById("header-titulo"),a=document.getElementById("form-container"),o=document.getElementById("opcion-ingreso"),s=document.getElementById("valorEscuadra"),n=document.getElementById("valorLegajo"),c=document.getElementById("value-pass"),r=document.getElementById("botonLegajo"),l=document.getElementById("page-1"),d=document.getElementById("to-page2"),i=document.getElementById("to-page3"),u=document.getElementById("to-page1"),m=document.getElementById("page-2"),L=document.getElementById("query-button"),v=document.getElementById("form-container-query"),y=document.getElementById("loader"),g=document.getElementById("value-mes-year"),b=document.getElementById("value-year"),f=document.getElementById("opciones"),p=document.getElementById("page-3"),h=document.getElementById("page-4"),T=document.getElementById("nueva-consulta"),I=!1,E=["vacio","üò≠","üò´","üòì","üòí","üòå","üòÅüéâ"],j=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],M=["Dom","Lun","Mar","Mie","Jue","Vie","Sab"];window.onload=function(){var a,o=localStorage.getItem("token"),s=localStorage.getItem("mes"),n=localStorage.getItem("anio");if(o){var c=(a=o.split(".")[1].replace("-","+").replace("_","/"),JSON.parse(window.atob(a)));t={error:"",body:c},e.classList.add("ocultar"),l.classList.add("ocultar"),m.classList.remove("ocultar"),d.classList.remove("ocultar"),i.classList.remove("marcador-seccion"),d.classList.add("marcador-seccion"),i.classList.remove("ocultar"),u.classList.remove("ocultar");var r={error:"",body:{legajo:c.legajo,name:c.name,turno:c.turno}};w[0].classList.remove("ocultar"),H(r),n&&(s&&fetch("".concat(O,"/getDate"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({mes:s,anio:n,turno:r.body.turno})}).then((function(t){return t.json()})).then((function(t){I=!0,B(t,1)})),fetch("".concat(O,"/getDate"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({mes:"anioCompleto",anio:n,turno:r.body.turno})}).then((function(t){return t.json()})).then((function(t){I=!0,A(t,1)})))}else l.classList.remove("ocultar"),w[0].classList.add("ocultar")};var w=document.getElementsByClassName("name-user"),D=document.getElementById("print-fecha"),S=document.getElementsByClassName("day-in-work"),k=document.getElementsByClassName("tabla"),A=function(t,e){k[e].innerHTML="";var a={body:t.body[0]},o={body:t.body[1]},s={body:t.body[2]},n={body:t.body[3]},c={body:t.body[4]},r={body:t.body[5]},l={body:t.body[6]},d={body:t.body[7]},i={body:t.body[8]},u={body:t.body[9]},m={body:t.body[10]},L={body:t.body[11]};B(a,e),B(o,e),B(s,e),B(n,e),B(c,e),B(r,e),B(l,e),B(d,e),B(i,e),B(u,e),B(m,e),B(L,e)},B=function(e,a){console.log(e);var o=t.body.turno,s=e.body.listAllTurnos.listAllDaysOnMes.length,n=new Date(e.body.listAllTurnos.listAllDaysOnMes[1]),c=n.getMonth(),r=n.getFullYear();c=j[c],k[a].insertAdjacentHTML("beforeend",'\n  <tr class="text-tabla">  \n    <td colspan = "6" class="titulo-mes">'.concat(c," - ").concat(r,'</td>    \n  </tr>\n  <tr class="text-tabla">\n    <td class=" perseguir">D√≠a</td>    \n    <td class=" perseguir">Fecha</td>\n    <td class=" perseguir">Ma√±ana</td>\n    <td class=" perseguir">Tarde</td>\n    <td class=" perseguir">Noche</td>\n    <td class=" perseguir">Franco</td>\n  </tr>'));for(var l=!1,d=0;d<s;d++){var i=new Date(e.body.listAllTurnos.listAllDaysOnMes[d]);nameDay=M[i.getUTCDay()];var u=new Date(i),m=u.getDate(),L=u.getMonth(),v=u.getFullYear(),y=e.body.listAllTurnos.maniana[d],g=e.body.listAllTurnos.tarde[d],b=e.body.listAllTurnos.noche[d],f=e.body.listAllTurnos.franco[d],p=void 0,h=(new Date(e.body.date)-i)/1e3/60/60/24;switch(h=parseInt(h,10),o){case y:0===h&&0==l&&(p="resaltar-hoy",l=!0),k[a].insertAdjacentHTML("beforeend",'<tr class="text-tabla '.concat(p,'">\n            <td>\n                ').concat(nameDay,"\n            </td>\n            <td>\n                ").concat(m,"/").concat(L+1,"/").concat(v,'\n            </td>\n            <td class="resaltar-turno">\n                ').concat(y,"\n            </td>\n            <td>\n                ").concat(g,"\n            </td>\n            <td>\n                ").concat(b,"\n            </td>\n            <td>\n                ").concat(f,"\n            </td>\n        </tr>"));break;case g:0===h&&0==l&&(p="resaltar-hoy",l=!0),k[a].insertAdjacentHTML("beforeend",'<tr class="text-tabla '.concat(p,'">\n            <td>\n                ').concat(nameDay,"\n            </td>\n            <td>\n                ").concat(m,"/").concat(L+1,"/").concat(v,"\n            </td>\n            <td>\n                ").concat(y,'\n            </td>\n            <td class="resaltar-turno">\n                ').concat(g,"\n            </td>\n            <td>\n                ").concat(b,"\n            </td>\n            <td>\n                ").concat(f,"\n            </td>\n        </tr>"));break;case b:0===h&&0==l&&(p="resaltar-hoy",l=!0),k[a].insertAdjacentHTML("beforeend",'<tr class="text-tabla '.concat(p,'">\n            <td>\n                ').concat(nameDay,"\n            </td>\n            <td>\n                ").concat(m,"/").concat(L+1,"/").concat(v,"\n            </td>\n            <td>\n                ").concat(y,"\n            </td>\n            <td>\n                ").concat(g,'\n            </td>\n            <td class="resaltar-turno">\n                ').concat(b,"\n            </td>\n            <td>\n                ").concat(f,"\n            </td>\n        </tr>"));break;case f:0===h&&0==l&&(p="resaltar-hoy",l=!0),k[a].insertAdjacentHTML("beforeend",'<tr class="text-tabla '.concat(p,'">\n            <td>\n                ').concat(nameDay,"\n            </td>\n            <td>\n                ").concat(m,"/").concat(L+1,"/").concat(v,"\n            </td>\n            <td>\n                ").concat(y,"\n            </td>\n            <td>\n                ").concat(g,"\n            </td>\n            <td>\n                ").concat(b,'\n            </td>\n            <td class="resaltar-turno">\n                ').concat(f,"\n            </td>\n        </tr>"))}}};o.addEventListener("change",(function(){var t=o.value;"legajo-password"==t?(a.classList.remove("ocultar"),s.classList.add("ocultar"),s.classList.remove("resaltar-opcion"),s.value="",valorLegajo.classList.remove("ocultar"),valorLegajo.classList.add("resaltar-opcion"),c.classList.remove("ocultar"),c.classList.add("resaltar-opcion")):"escuadra"==t?(a.classList.remove("ocultar"),valorLegajo.classList.add("ocultar"),valorLegajo.value="",s.classList.remove("ocultar"),s.classList.add("resaltar-opcion"),valorLegajo.classList.remove("resaltar-opcion"),c.classList.add("ocultar"),c.classList.remove("resaltar-opcion")):(a.classList.add("ocultar"),valorLegajo.classList.add("ocultar"),valorLegajo.classList.remove("resaltar-opcion"),valorLegajo.value="",s.classList.remove("resaltar-opcion"),s.classList.add("ocultar"),s.value="",c.classList.remove("resaltar-opcion"),c.classList.add("ocultar"))})),r.addEventListener("click",(function(){"legajo-password"==o.value?F():"escuadra"==o.value&&N()}));var O=window.location.origin,H=function(t){var e=t.body.name,a=t.body.legajo,o=t.body.turno;w[0].innerHTML="",w[1].innerHTML="",w[0].insertAdjacentHTML("beforeend","".concat(e," - ").concat(a)),w[1].insertAdjacentHTML("beforeend",e),fetch("".concat(O,"/getDate"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({mes:(new Date).getMonth(),anio:(new Date).getFullYear(),turno:o})}).then((function(t){return t.json()})).then((function(t){C(t)}))},C=function(t){comoTrabajo=t.body.inDayWork.turno;var e=new Date(t.body.date);day=e.getDate(),mes=e.getMonth(),mes=j[mes],D.innerHTML="",D.insertAdjacentHTML("beforeend","".concat(day," de ").concat(mes)),diasParaFranco=t.body.inDayWork.diaEnTurno,S[0].innerHTML="",S[1].innerHTML="",S[0].insertAdjacentHTML("beforeend","".concat(comoTrabajo)),S[1].insertAdjacentHTML("beforeend","".concat(6-diasParaFranco," ").concat(E[diasParaFranco])),k[0].innerHTML="",B(t,0)};d.addEventListener("click",(function(){i.classList.remove("marcador-seccion"),d.classList.add("marcador-seccion"),m.classList.add("bounceInLeft"),l.classList.add("ocultar"),m.classList.remove("ocultar"),p.classList.add("ocultar"),h.classList.add("ocultar")})),i.addEventListener("click",(function(){1==I?(h.classList.add("bounceInRight"),P()):(p.classList.add("bounceInRight"),d.classList.remove("marcador-seccion"),i.classList.add("marcador-seccion"),l.classList.add("ocultar"),m.classList.add("ocultar"),p.classList.remove("ocultar"),h.classList.add("ocultar"))})),T.addEventListener("click",(function(){swal({title:"Seguro que desea hacer una nueva consulta?",dangerMode:!0,buttons:!0}).then((function(t){t&&(I=!1,localStorage.setItem("mes",""),localStorage.setItem("anio",""),p.classList.remove("ocultar"),h.classList.add("ocultar"),v.classList.remove("ocultar"),y.classList.remove("lds-spinner"))}))})),u.addEventListener("click",(function(){swal({title:"Seguro que desea salir?",dangerMode:!0,buttons:!0}).then((function(t){t&&(localStorage.clear(),swal("Cerrado exitosamente",{icon:"success"}).then((function(t){t&&(m.classList.remove("bounceInLeft"),p.classList.remove("bounceInRight"),h.classList.remove("bounceInRight"),m.classList.add("bounceOut"),p.classList.add("bounceOut"),h.classList.add("bounceOut"),I=!1,i.classList.remove("marcador-seccion"),setTimeout(x,1e3))})))}))})),g.addEventListener("keyup",(function(t){"Enter"==t.key&&Y()})),L.addEventListener("click",(function(){Y()})),b.addEventListener("keyup",(function(t){"Enter"==t.key&&Y()}));var Y=function(){v.classList.remove("ocultar"),"mes"==f.value&&(valorMesYear=g.value,""==valorMesYear?swal("Faltan datos","Complete con el mes deseado","warning"):(fecha=valorMesYear+"-1",fecha=new Date(fecha),fetch("".concat(O,"/getDate"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({mes:fecha.getMonth(),anio:fecha.getFullYear(),turno:t.body.turno})}).then((function(t){return t.json()})).then((function(t){k[1].innerHTML="";var e=new Date(t.body.listAllTurnos.listAllDaysOnMes[1]),a=e.getMonth(),o=e.getFullYear();localStorage.setItem("mes",a),localStorage.setItem("anio",o),v.classList.add("ocultar"),y.classList.add("lds-spinner"),setTimeout(P,2e3),B(t,1)})))),"anio"==f.value&&(valorYear=b.value,""==valorYear?swal("Faltan datos","Complete con el a√±o deseado","warning"):valorYear>2100||valorYear<2e3?swal("A√±os validos","Min 2000 Max 2100 ","error"):fetch("".concat(O,"/getDate"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({mes:"anioCompleto",anio:valorYear,turno:t.body.turno})}).then((function(t){return t.json()})).then((function(t){localStorage.setItem("mes",""),localStorage.setItem("anio",valorYear),v.classList.add("ocultar"),y.classList.add("lds-spinner"),setTimeout(P,2e3),A(t,1)}))),""==f.value&&swal("Elija una opcion","Mes o A√±o","warning")};f.addEventListener("change",(function(){var t=f.value;"mes"==t?(b.classList.add("ocultar"),b.value="",g.classList.remove("ocultar"),g.classList.add("resaltar-opcion"),b.classList.remove("resaltar-opcion")):"anio"==t?(g.classList.add("ocultar"),g.value="",b.classList.remove("ocultar"),b.classList.add("resaltar-opcion"),g.classList.remove("resaltar-opcion")):(g.classList.add("ocultar"),g.classList.remove("resaltar-opcion"),g.value="",b.classList.remove("resaltar-opcion"),b.classList.add("ocultar"),b.value="")})),n.addEventListener("keyup",(function(t){"Enter"==t.key&&F()})),c.addEventListener("keyup",(function(t){"Enter"==t.key&&F()}));var F=function(){""===n.value||""===c.value?swal("Datos incompletos","Se requiere legajo y contrase√±aüò¨","warning"):fetch("".concat(O,"/login"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({legajo:n.value,password:c.value})}).then((function(t){return t.json()})).then((function(e){e.body.name?(o.classList.add("ocultar"),a.classList.add("slide-rotate-hor-t-bck"),setTimeout(J,400),t=e,localStorage.setItem("token",t.body.token),H(t)):swal("Datos incorrectos","üòü","error")})).catch((function(t){return console.log(t)}))},N=function(){""===s.value?swal("Datos incompletos","Elegir A - B - C - Düò¨","warning"):fetch("".concat(O,"/login"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({legajo:s.value,password:"noPass"})}).then((function(t){return t.json()})).then((function(e){e.body.name?(o.classList.add("ocultar"),a.classList.add("slide-rotate-hor-t-bck"),setTimeout(J,400),t=e,localStorage.setItem("token",t.body.token),H(t)):swal("Datos incorrectos","üòü","error")})).catch((function(t){return console.log(t)}))},J=function(){e.classList.add("ocultar"),l.classList.add("ocultar"),m.classList.remove("ocultar"),p.classList.add("ocultar"),h.classList.add("ocultar"),m.classList.add("bounceInUp"),d.classList.remove("ocultar"),d.classList.add("marcador-seccion"),i.classList.remove("ocultar"),u.classList.remove("ocultar"),d.classList.add("zoomInLeft"),i.classList.add("zoomInDown"),u.classList.add("zoomInRight"),w[0].classList.remove("ocultar")},P=function(){I=!0,d.classList.remove("marcador-seccion"),i.classList.add("marcador-seccion"),m.classList.add("ocultar"),p.classList.add("ocultar"),v.classList.remove("ocultar"),y.classList.remove("lds-spinner"),h.classList.remove("ocultar")},x=function(){m.classList.remove("bounceOut"),p.classList.remove("bounceOut"),h.classList.remove("bounceOut"),e.classList.remove("ocultar"),l.classList.remove("ocultar"),o.classList.remove("ocultar"),a.classList.remove("slide-rotate-hor-t-bck"),m.classList.add("ocultar"),p.classList.add("ocultar"),h.classList.add("ocultar"),w[0].classList.add("ocultar"),d.classList.add("ocultar"),i.classList.add("ocultar"),u.classList.add("ocultar"),d.classList.remove("zoomInLeft"),i.classList.remove("zoomInDown"),u.classList.remove("zoomInRight"),m.classList.remove("bounceInUp"),n.value="",c.value=""}})();